{% extends 'cattle/mobile/base.html' %}

{% block title %}ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - CowTrack ãƒ¢ãƒã‚¤ãƒ«{% endblock %}

{% block content %}
<div class="mobile-stats">
    <div class="mobile-stat-card">
        <div class="mobile-stat-number">{{ total_cows }}</div>
        <div class="mobile-stat-label">ç·ç‰›æ•°</div>
    </div>
    <div class="mobile-stat-card">
        <div class="mobile-stat-number">{{ active_cows }}</div>
        <div class="mobile-stat-label">æ´»å‹•ä¸­</div>
    </div>
    <div class="mobile-stat-card">
        <div class="mobile-stat-number">{{ today_treatments }}</div>
        <div class="mobile-stat-label">ä»Šæ—¥ã®æ²»ç™‚</div>
    </div>
    <div class="mobile-stat-card">
        <div class="mobile-stat-number">{{ week_treatments }}</div>
        <div class="mobile-stat-label">é€±é–“æ²»ç™‚</div>
    </div>
</div>

<div class="mobile-card">
    <h3>æœ€è¿‘ã®æ²»ç™‚å±¥æ­´</h3>
    {% if recent_treatments %}
        <div class="mobile-list">
            {% for treatment in recent_treatments %}
            <div class="mobile-list-item">
                <div>
                    <strong>{{ treatment.cow.cow_number|slice:"-5:" }}</strong>
                    <br>
                    <small>{{ treatment.treatment_date|date:"m/d H:i" }}</small>
                </div>
                <div>
                    <small>{{ treatment.diagnosis|default:"-" }}</small>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>æœ€è¿‘ã®æ²»ç™‚å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“</p>
    {% endif %}
</div>

<div class="mobile-card">
    <h3>æœ€è¿‘ç™»éŒ²ã•ã‚ŒãŸç‰›</h3>
    {% if recent_cows %}
        <div class="mobile-list">
            {% for cow in recent_cows %}
            <div class="mobile-list-item">
                <div>
                    <strong>{{ cow.cow_number|slice:"-5:" }}</strong>
                    <br>
                    <small>{{ cow.shed_code }}ï½œ{{ cow.intake_date|date:"n" }}{{ cow.origin_region|region_short }}</small>
                </div>
                <div>
                    <span class="mobile-btn secondary" style="width: auto; padding: 0.25rem 0.5rem; font-size: 0.8rem;">
                        {{ cow.status }}
                    </span>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>æœ€è¿‘ç™»éŒ²ã•ã‚ŒãŸç‰›ã¯ã‚ã‚Šã¾ã›ã‚“</p>
    {% endif %}
</div>

<div class="mobile-card">
    <h3>ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
    <a href="{% url 'cattle:mobile_feeding_observation_create' %}" class="mobile-btn success">
        ğŸ½ï¸ é¤Œè¦³å¯Ÿè¨˜éŒ²ã‚’ç™»éŒ²
    </a>
    <a href="{% url 'cattle:mobile_treatment_create' %}" class="mobile-btn success">
        ğŸ’Š æ²»ç™‚å±¥æ­´ã‚’ç™»éŒ²
    </a>
    <a href="{% url 'cattle:mobile_cow_list' %}" class="mobile-btn">
        ğŸ„ ç‰›ä¸€è¦§ã‚’è¡¨ç¤º
    </a>
    <a href="{% url 'cattle:mobile_treatment_list' %}" class="mobile-btn">
        ğŸ’Š æ²»ç™‚å±¥æ­´ã‚’ç¢ºèª
    </a>
</div>
{% endblock %} 